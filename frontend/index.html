<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Quizzy ðŸ§¬</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src='//libtl.com/sdk.js' data-zone='9845275' data-sdk='show_9845275'></script>
  </head>
  <body>
    <!-- User Header -->
    <div id="userHeader" class="user-header">
      <img id="userAvatar" src="" alt="Avatar" class="avatar" />
      <div class="user-info">
        <div id="userName" class="name">Loading...</div>
        <div id="starBalance" class="balance">ðŸŒŸ 0</div>
      </div>
    </div>

    <!-- Forced First Survey Modal -->
    <div id="firstSurveyModal" class="modal" style="display: none">
      <div class="modal-content">
        <h2>ðŸŽ¯ First Survey</h2>
        <p>Complete this survey â†’ earn 50 Stars! ðŸª™</p>
        <button id="startFirstSurveyBtn" class="btn">Start Survey â†’</button>
      </div>
    </div>

    <!-- Main App -->
    <div id="app">
      <!-- Survey Page -->
      <div id="surveyPage" class="page" style="display: none">
        <h2>ðŸ“‹ Surveys</h2>
        <div id="incomingSurveys">
          <h3>ðŸ“¥ Incoming Surveys</h3>
          <div id="incomingList"></div>
        </div>
        <div id="completedSurveys">
          <h3>âœ… Completed Surveys</h3>
          <div id="completedList"></div>
          <button onclick="watchAdPopupForStars(30)" class="btn">Watch Popup Ad â†’ 30 Stars</button>
        </div>
      </div>

      <!-- Task Page -->
      <div id="taskPage" class="page" style="display: none">
        <h2>âœ… Tasks</h2>
        <div class="task-card">
          <h3>Join Our Channel</h3>
          <p>Earn 10 Stars</p>
          <button onclick="joinChannel()" class="btn">Join Channel â†’</button>
          <button
            onclick="claimChannelReward()"
            id="claimChannelBtn"
            class="btn"
            style="display: none"
          >
            Claim 10 Stars
          </button>
        </div>
        <div class="task-card">
          <div> 
    <h3>ðŸ“º Watch Ad â†’ Earn 50 Stars</h3>
    <button onclick="watchAdForStars(50)" class="btn">Watch Now â†’</button>
</div>
 </div>
        <div class="task-card">
          <h3>Invite Friends</h3>
          <p>Earn 30 Stars per friend</p>
          <div id="referralLink">Loading...</div>
          <button onclick="copyRefLink()" class="btn">Copy Link</button>
          <div id="referralList"></div>
        </div>
      </div>

      <!-- Me Page -->
      <div id="mePage" class="page" style="display: none">
        <h2>ðŸ‘¤ Me</h2>
        <div class="dashboard-card">
          <h3>ðŸ“Š Stats</h3>
          <p>Total Stars: <span id="totalStars">0</span></p>
          <p>Surveys Completed: <span id="surveysCompleted">0</span></p>
          <p>Friends Referred: <span id="friendsReferred">0</span></p>
        </div>
        <div class="dashboard-card">
          <h3>ðŸ’° Redeem Stars</h3>
          <p>Min: 2000 Stars | Max: 2000/week</p>
          <button onclick="showRedeemModal()" class="btn redeem-btn">
            Redeem Now
          </button>
        </div>
      </div>

      <!-- Survey Section (Modal) -->
      <div id="surveySection" class="modal" style="display: none">
        <div class="modal-content">
          <h2 id="surveyTitle">ðŸŽ¯ What's Your Hidden Money Personality?</h2>
          <div id="questionContainer"></div>
        </div>
      </div>

      <!-- Reward Section (Modal) -->
      <div id="rewardSection" class="modal" style="display: none">
        <div class="modal-content">
          <h2>ðŸŽ‰ Your Fortune is Ready!</h2>
          <div id="fortuneResult"></div>
          <button id="claimBtn" class="btn">Claim 50 Stars</button>
        </div>
      </div>

      <!-- Redeem Modal -->
      <div id="redeemModal" class="modal" style="display: none">
        <div class="modal-content">
          <h2>ðŸ’° Redeem Stars</h2>
          <p>Enter payment info (min 2000 Stars):</p>
          <input
            type="text"
            id="paymentName"
            placeholder="Full Name"
            class="input-field"
          />
          <input
            type="text"
            id="paymentEmail"
            placeholder="PayPal Email"
            class="input-field"
          />
          <button onclick="submitRedeem()" class="btn">
            Redeem 2000 Stars
          </button>
        </div>
      </div>

      <!-- Toast -->
      <div id="toast" class="toast">Message</div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
      <button onclick="showPage('surveyPage')" class="nav-btn active">
        ðŸ“‹ Surveys
      </button>
      <button onclick="showPage('taskPage')" class="nav-btn">âœ… Tasks</button>
      <button onclick="showPage('mePage')" class="nav-btn">ðŸ‘¤ Me</button>
    </div>

    <script src="app.js"></script>
  </body>
</html>
